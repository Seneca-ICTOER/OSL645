<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Labs/lab9">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Lab 9 - Users, Groups and Services | Introduction to Open Source Systems</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io/OSL645/Labs/lab9"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 9 - Users, Groups and Services | Introduction to Open Source Systems"><meta data-rh="true" name="description" content="Create and manage users, groups and services"><meta data-rh="true" property="og:description" content="Create and manage users, groups and services"><link data-rh="true" rel="icon" href="/OSL645/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io/OSL645/Labs/lab9"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io/OSL645/Labs/lab9" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io/OSL645/Labs/lab9" hreflang="x-default"><link rel="icon" href="/OSL645/img/pwa/icon-512x512.png">
<link rel="manifest" href="/OSL645/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/OSL645/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/OSL645/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/OSL645/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/OSL645/assets/css/styles.b562f4b2.css">
<link rel="preload" href="/OSL645/assets/js/runtime~main.fd965d1f.js" as="script">
<link rel="preload" href="/OSL645/assets/js/main.bac71425.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/OSL645/"><div class="navbar__logo"><img src="/OSL645/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/OSL645/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OSL645 - Introduction to Open Source Systems</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OSL645/">Welcome to OSL645</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OSL645/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/OSL645/Labs/lab1a">Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab1a">Lab 1A - Installing and Using Linux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab1">Lab 1B - Unix and Linux File Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab2">Lab 2 - Advanced File Management and Quoting Special Characters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab3">Lab 3 - Redirection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab4">Lab 4 - Numbering Conversion, File Permissions &amp; Introduction to Shell Scripting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab5">Lab 5 - File Transfer and Sending Email Messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab6">Lab 6 - Process Management, Aliases &amp; Shell Scripting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab7">Lab 7 - Regular Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab8">Lab 8 - Sed and Awk Utilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/OSL645/Labs/lab9">Lab 9 - Users, Groups and Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OSL645/Labs/lab10">Lab 10 - Advanced Shell Scripting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OSL645/ExtraResources/course-policies">Extra Resources</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OSL645/Project">Project</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/OSL645/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Labs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 9 - Users, Groups and Services</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 9: Users, Groups and Services</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="main-objectives">Main Objectives<a href="#main-objectives" class="hash-link" aria-label="Direct link to Main Objectives" title="Direct link to Main Objectives">​</a></h2><ul><li>Administer (<strong>add, remove, modify</strong>) <strong>users</strong> on a Linux system.</li><li>Save time while adding new users using a template of <strong>start-up files</strong>.</li><li>Create and manage <strong>groups</strong> on a Linux system.</li><li><strong>Start, Restart and Stop services</strong> on a Linux system.</li><li><strong>Enable and Disable services</strong> on a Linux system.</li><li>Display the <strong>status of running services</strong> on a Linux system.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-reference-material">Lab Reference Material<a href="#lab-reference-material" class="hash-link" aria-label="Direct link to Lab Reference Material" title="Direct link to Lab Reference Material">​</a></h2><p><strong>Course Slides:</strong></p><ul><li>Week 11 Lecture 1 Notes: <a href="https://docs.google.com/presentation/d/e/2PACX-1vRvhsCN4xNnDZdYf5NLOr-sEvyWSpgYoNc1htHFIAxbh5aLNZJ7WaoX_ubjQREq2rU8_f2SOkR3qngA/pub?start=false&amp;loop=false&amp;delayms=3000" target="_blank" rel="noopener noreferrer">Web</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="commands">Commands:<a href="#commands" class="hash-link" aria-label="Direct link to Commands:" title="Direct link to Commands:">​</a></h2><p><strong>User Management</strong></p><table><thead><tr><th><a href="https://www.systutorials.com/docs/linux/man/8-useradd/" target="_blank" rel="noopener noreferrer">useradd</a></th><th><a href="https://www.systutorials.com/docs/linux/man/8-userdel/" target="_blank" rel="noopener noreferrer">userdel</a></th><th><a href="https://www.systutorials.com/docs/linux/man/8-usermod/" target="_blank" rel="noopener noreferrer">usermod</a></th><th><a href="https://www.systutorials.com/docs/linux/man/8-groupadd/" target="_blank" rel="noopener noreferrer">groupadd</a></th><th><a href="https://www.systutorials.com/docs/linux/man/8-groupdel/" target="_blank" rel="noopener noreferrer">groupdel</a></th><th><a href="http://www.agr.unideb.hu/~agocs/informatics/11_e_unix/unixhelp/unixhelp.ed.ac.uk/CGI/man-cgied74.html?chage" target="_blank" rel="noopener noreferrer">chage</a></th></tr></thead></table><p><strong>Managing Services</strong></p><ul><li><a href="http://www.dsm.fordham.edu/cgi-bin/man-cgi.pl?topic=systemctl" target="_blank" rel="noopener noreferrer">systemctl</a></li></ul><p><strong>Miscellaneous</strong></p><table><thead><tr><th><a href="http://man7.org/linux/man-pages/man5/passwd.5.html" target="_blank" rel="noopener noreferrer">/etc/passwd</a></th><th><a href="http://man7.org/linux/man-pages/man5/group.5.html" target="_blank" rel="noopener noreferrer">/etc/group</a></th><th><a href="http://man7.org/linux/man-pages/man5/shadow.5.html" target="_blank" rel="noopener noreferrer">/etc/shadow</a></th><th><a href="http://archive.linuxfromscratch.org/blfs-museum/1.0/BLFS-1.0/postlfs/skel.html" target="_blank" rel="noopener noreferrer">/etc/skel</a></th><th><a href="http://zenit.senecac.on.ca/wiki/index.php/Init_vs_systemd" target="_blank" rel="noopener noreferrer">init vs systemd</a></th></tr></thead></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="key-concepts">KEY CONCEPTS<a href="#key-concepts" class="hash-link" aria-label="Direct link to KEY CONCEPTS" title="Direct link to KEY CONCEPTS">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-1-usergroup-management">Investigation 1: User/Group Management<a href="#investigation-1-usergroup-management" class="hash-link" aria-label="Direct link to Investigation 1: User/Group Management" title="Direct link to Investigation 1: User/Group Management">​</a></h2><p><strong>ATTENTION: This lab must be graded by the end of your classes in Week 13 to obtain a grade of 2% towards this course.</strong></p><p>In lab 4, you learned how to change permissions for directories and files relating to user/owner, same group members, and other users. In this lab you will learn how to create or remove users and groups as well as change the ownership of directories and files! We will now learn to perform key user account management operations in this section.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-studying-the-etcpasswd-file">Part 1: Studying the /etc/passwd file<a href="#part-1-studying-the-etcpasswd-file" class="hash-link" aria-label="Direct link to Part 1: Studying the /etc/passwd file" title="Direct link to Part 1: Studying the /etc/passwd file">​</a></h3><p>The /etc/passwd file is a datafile that stores user account information, for both system accounts and regular users. Since we will be learning to create, modify and remove users on our Linux system, we should study this file in order to understand how the user account management commands will affect this file.</p><p><strong>Perform the following steps:</strong></p><ol><li>Launch your Ubuntu <strong>VM</strong>.</li><li>Open the terminaln application.</li><li>Use the <code>cat</code> command to view the <code>/etc/passwd</code> file.</li><li>Make note of the contents of that file.</li><li>Read about the file: <a href="http://man7.org/linux/man-pages/man5/passwd.5.html" target="_blank" rel="noopener noreferrer">/etc/passwd</a><ul><li>Note what information each field contains.</li></ul></li><li>Why do you think there are so many users?</li><li>Look at the names of the users. What do you think these user names represent? Are they all people?</li><li>What is the numeric user ID (UID) of the <strong>root</strong> user?</li><li>What is the numeric user ID (UID) and default shell of the user <strong>mail</strong>?</li><li>What is the UID, Comment, and default shell of your regular user account?</li></ol><ul><li>UID 0 is reserved for the <strong>root</strong> user. In fact it is the UID that gives root its power. Not the account name.</li><li>The user IDs of <strong>system</strong> accounts are below 1000. System accounts are used internally and are usually associated with services. The default shell of <strong>/usr/sbin/nologin</strong> means they can&#x27;t be used to login interactively.</li><li>Regular user accounts are assigned UID&#x27;s above 1000 and are allowed to login interactively.</li><li>When new regular user accounts they are by default assigned the next available UID above 1000.</li><li>The <strong>Comment</strong> field typically holds the Full name of a regular user.</li></ul><p><img loading="lazy" alt="Passwd File" src="/OSL645/assets/images/Passwd-file-1daf9dfed5c1484a9966af672d2a99cf.png" width="1131" height="157" class="img_ev3q"></p><p>The /etc/passwd file contains records for users (system accounts and regular-user accounts). There are several fields including: <strong>Username</strong>, <strong>password link</strong> (&quot;x&quot; indicates hashed password stored in /etc/shadow file only accessible by root), <strong>user-id, primary group-id, comment</strong> (eg. Full Name), <strong>default home directory</strong>, and <strong>default shell</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-adding-removing-and-modifying-users">Part 2: Adding, Removing, and Modifying Users<a href="#part-2-adding-removing-and-modifying-users" class="hash-link" aria-label="Direct link to Part 2: Adding, Removing, and Modifying Users" title="Direct link to Part 2: Adding, Removing, and Modifying Users">​</a></h3><p>In this section, we will now learn how to properly add user accounts, remove user accounts, and modify existing user account information.</p><p><strong>Perform the following steps:</strong></p><ol><li>Remain in your <strong>Ubuntu</strong> VM for this section.</li><li>Read the man page for the <code>useradd</code> command.</li><li>Create a new user called <strong>osl645_1</strong> by:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Launch an interactive shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> -i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create a user account using defaults</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> osl645_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check the contents of /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;osl645_1&quot;</span><span class="token plain"> /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check for a home directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l /home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Was the account created?</li><li>What were the values for the <strong>UID</strong>, <strong>GID</strong>, <strong>Comment</strong>, <strong>HOMEDIR</strong>, and <strong>SHELL</strong>?</li><li>Was a home directory created?</li><li>Check the man page for <strong>useradd</strong>, what are the options to force a home directory to be created, add a full name, and assign <strong>bash</strong> as the default shell?</li><li>Create a new user called <strong>osl645_2</strong> using those options:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a user account using options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> -m -c </span><span class="token string" style="color:#e3116c">&quot;osl645 Account 2&quot;</span><span class="token plain"> -s </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/bash&quot;</span><span class="token plain"> osl645_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check the contents of /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;osl645&quot;</span><span class="token plain"> /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check for a home directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l /home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="9"><li>What were the values for the <strong>UID</strong>, <strong>GID</strong>, <strong>Comment</strong>, <strong>HOMEDIR</strong>, and <strong>SHELL</strong>?</li><li>Was a home directory created?</li></ol><p><img loading="lazy" alt="ubuntuusers1" src="/OSL645/assets/images/ubuntuusers1-20540a77904b3f8d15fe24bc1a8d213a.png" width="1000" height="248" class="img_ev3q"></p><ol start="11"><li>Read the man page for <strong>useradd</strong> and scroll down to the <strong>FILES</strong> section</li><li>What is the file you can edit to change your default values for account creation?</li><li>Edit the file <strong>/etc/default/useradd</strong>, change the value of <strong>SHELL</strong></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable environment constant" style="color:#36acaa">SHELL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/usr/bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="14"><li>Create a new user called <strong>osl645_3</strong>:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a user account using options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> -m -c </span><span class="token string" style="color:#e3116c">&quot;osl645 Account 3&quot;</span><span class="token plain"> osl645_3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check the contents of /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;osl645&quot;</span><span class="token plain"> /etc/passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check for a home directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l /home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="14"><li>Was the home directory created?</li><li>Was the shell set correctly?</li></ol><p><img loading="lazy" alt="ubuntuusers2" src="/OSL645/assets/images/ubuntuusers2-a2d67c5791b59c0cb181f3ccfabf8df7.png" width="1002" height="264" class="img_ev3q"></p><p>We have not given the accounts passwords. The passwords are not stored in <strong>/etc/passwd</strong>. A long time ago with the Unix operating system, passwords were stored in <strong>/etc/passwd</strong> but they were removed from the file and put into the file <strong>/etc/shadow</strong>. That is because all users require read access to <strong>/etc/passwd</strong> for the purpose of logging in. Passwords even in hashed form should NOT be visible to all users. If look at the image above you can see an <strong>x</strong> in the old password field as a place holder.</p><ol start="16"><li>View the contents of <strong>/etc/shadow</strong></li><li>The format of the file is similar to <strong>/etc/passwd</strong>, one line per account with fields separated by <strong>:</strong> .</li><li>Scroll to the bottom of the file to see the regular user accounts</li></ol><p><img loading="lazy" alt="deb1shadow1" src="/OSL645/assets/images/deb1shadow1-d094d97fbb23cb44af60324965c90cef.png" width="1155" height="239" class="img_ev3q"></p><ol start="19"><li>You can see that your regular user account has a hashed password in the file, but your new osl645 accounts have only a <strong>!</strong> . This means the password has not been set, and until it is this account can&#x27;t be used to login interactively</li><li>Set the password for the user <strong>osl645_1</strong> and <strong>osl645_2</strong> using the commands:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Set a users password</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">passwd</span><span class="token plain"> osl645_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">passwd</span><span class="token plain"> osl645_2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="21"><li>View the contents of <strong>/etc/shadow</strong> to see the changes.</li></ol><p>We can also modify a user after the fact using the <strong>usermod</strong> command. Remember that the account <strong>osl645_1</strong> was created with out a <strong>Full Name</strong> and the incorrect <strong>Shell</strong></p><ol start="22"><li>View the man page for the <strong>usermod</strong> command</li><li>You can see that the command options are pretty similar to the <strong>useradd</strong> command</li><li>Modify the <strong>osl645_1</strong> account using the following:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Modify the user account</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -c </span><span class="token string" style="color:#e3116c">&quot;osl645 Account 1&quot;</span><span class="token plain"> -s </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/bash&quot;</span><span class="token plain"> osl645_1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="25"><li>Confirm the changes are made in <strong>/etc/passwd</strong></li></ol><p>When we created the <strong>osl645_1</strong> account we didn&#x27;t create a home directory. We should do that manually.</p><ol start="26"><li>List the contents of <strong>/home</strong> <code>ls -l /home</code><img loading="lazy" alt="deb1home1" src="/OSL645/assets/images/ubuntuhome1-21f0ce39eaaaf98c2ad6a248c10543cd.png" width="884" height="149" class="img_ev3q"></li><li>You can see that each users home directory is owned by the user and the group assigned is the primary group of that user.</li><li>You can also see that permissions have been given to that user. (our osl645 users home directory are visible to other users)</li><li>Issue the following commands to create a home directory for <strong>osl645_1</strong> and give ownership to the user</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a home directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /home/osl645_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change the owner and group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Example chown user:group /home/dir</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> osl645_1:osl645_1 /home/osl645_1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="30"><li>Confirm the creation of the home directory</li><li>Set the permissions of the home directory so that only the owner has access</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Set permissions for osl645 users home directories</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">700</span><span class="token plain"> /home/osl645*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="32"><li>List the entire contents of the home directories for <strong>osl645_1</strong> and <strong>osl645_2</strong>, including hidden files
<img loading="lazy" alt="ubuntuhome2" src="/OSL645/assets/images/ubuntuhome2-1251f5b093c28e536bb01ab3b3a34899.png" width="1034" height="436" class="img_ev3q"></li><li>You can see the <strong>osl645_2</strong> home directory contains some files that <strong>osl645_1</strong> does not have. Where do you think they come from?</li><li>List the entire contents, including hidden files, of <strong>/etc/skel</strong><img loading="lazy" alt="ubuntuskel1" src="/OSL645/assets/images/ubuntuskel1-fc43d02323c10e82481c4e7272e037e8.png" width="953" height="265" class="img_ev3q"></li></ol><p><strong>/etc/skel/</strong> is a &quot;template&quot; for new home directories. Any files and directories in that directory will be copied into any new users home directory when they are created.</p><ol start="35"><li>Create a file called <strong>foobar.txt</strong> in <strong>/etc/skel</strong></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Add a file to /etc/skel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;this is a test file&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /etc/skel/foobar.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="36"><li>Create a new user called <strong>osl645_4</strong> using the correct option to create a home directory and setting the shell to <strong>bash</strong></li><li>Check the contents of <strong>osl645_4</strong>&#x27;s home directory. Did they receive the file <strong>foobar.txt</strong></li></ol><p>We should confirm that our accounts work. By testing a login to the Desktop Environment.</p><ol start="38"><li>Exit from the interactive <strong>sudo</strong> shell: <code>exit</code></li><li>Exit the terminal and logout of the desktop</li><li>Login to the desktop as the user osl645_2</li></ol><p><img loading="lazy" alt="ubuntulogin" src="/OSL645/assets/images/ubuntulogin-86cb9661f9d29423c4255959156980d1.png" width="696" height="480" class="img_ev3q"></p><ol start="41"><li>Logout and login back in as your regular user account</li></ol><p>The next step is to remove a user account. Using the <strong>userdel</strong> command.</p><blockquote><p>Considerations when removing accounts:</p><ul><li>Should the account be removed or just disabled?</li><li>Should the home directory be deleted with all of the files?</li></ul><p>Sometimes it is better to disable an account rather than delete it.</p><p>The files in home directory may need to be passed over to a new employee or retained for investigative purposes</p></blockquote><ol start="42"><li>Read the man page for the <strong>userdel</strong> command</li><li>What is the option to remove a users home directory?</li><li>Use the following commands to remove the <strong>osl645_1</strong> and <strong>osl645_4</strong> accounts. Do not remove the <strong>osl645_4</strong> home directory</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Start interactive sudo shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> -i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Remove osl645_1 account and home directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">userdel</span><span class="token plain"> -r osl645_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Remove osl645_4 account</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">userdel</span><span class="token plain"> osl645_4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="45"><li>List the contents of <strong>/home</strong> including file ownership</li></ol><p><img loading="lazy" alt="ubuntuhome3" src="/OSL645/assets/images/ubuntuhome3-bd5706707f5bd841ed400e2da0d2865a.png" width="763" height="176" class="img_ev3q"></p><p>Notice the User and Group field for <strong>osl645_4</strong> is shown numerically. That is because the filesystem records ownership using UID and GID numbers. When we are shown a listing it resolves those numeric values to names. As the user has been removed it can&#x27;t be resolved.</p><p>Notice the <strong>-n</strong> option for <strong>ls</strong> shows ownership numerically.</p><p><strong>Disabling an Account</strong></p><p>There are 2 ways to disable an account, <strong>lock</strong> the accounts password, and <strong>expire</strong> the account.</p><ol><li>Read the man page for <strong>usermod</strong></li><li>Read about the <strong>&quot;-L, --lock&quot;</strong>, <strong>&quot;-U, --unlock&quot;</strong>, and <strong>&quot;-e, --expiredate&quot;&quot;</strong> options</li><li>Try the following commands, check the changes made to <strong>/etc/shadow</strong> after each command (account expiry is the 2nd last field)</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Lock the password for osl645_2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -L osl645_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Unlock the password for osl645_2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -U osl645_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Expire the osl645_2 account immediately</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -e </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> osl645_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Unexpire the osl645_2 account</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -e -1 osl645_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Expire the account of osl645_1 at the end of 2128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -e </span><span class="token number" style="color:#36acaa">2128</span><span class="token plain">-12-31 osl645_2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Exit the interactive <strong>sudo</strong> shell</li></ol><p>Be sure to record your observations in your lab notes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-3-managing-groups">Part 3: Managing Groups<a href="#part-3-managing-groups" class="hash-link" aria-label="Direct link to Part 3: Managing Groups" title="Direct link to Part 3: Managing Groups">​</a></h3><p>In this section, we will learn how to create, remove and modify groups in our Linux VM. In lab 4 you how to change permissions with the <strong>chmod</strong> command, but you didn&#x27;t have admin privileges to <strong>create groups</strong> to allow directory and regular file sharing. Since you now have admin privileges with your VM, you can now create groups, and add users to this group to allow file-sharing among users.</p><p><strong>Perform the following steps:</strong></p><ol><li>Make certain that you are still in a terminal as your regular user account on the <strong>ubuntu</strong> VM.</li><li>Type the command <code>groups</code></li><li>The output of this command is the list of your group memberships.
<img loading="lazy" alt="ubuntugroups1" src="/OSL645/assets/images/ubuntugroups1-106dcb4bb396327682cde740fe476006.png" width="746" height="63" class="img_ev3q">
Every user account is assigned a <strong>primary</strong> group. On most Linux distributions when a new user account is created a new group is also created with the same name, that group is then assigned as the primary group for that user. However, not all Linux systems are configured that way. On the host matrix.senecacollege.ca your user account is assigned to a primary group called <strong>users</strong>.</li><li>Close all application windows, and switch user accounts by clicking on the <strong>logout</strong> icon and clicking on the <strong>Switch User button, and then login as the user </strong>osl645_2<!-- -->*<!-- -->*<!-- -->.</li><li>Open a terminal.</li><li>Create a file called <strong>information.txt</strong> in the home directory of that user.</li><li>Issue the following commands:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> information.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># List the details of the file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l information.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># List the details numerically</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -ln</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="8"><li>Who owns that file? What primary group does that file belong to?</li></ol><p><img loading="lazy" alt="ubuntugroups2" src="/OSL645/assets/images/ubuntugroups2-7d5b348bd32731c67e2a6f0d1063356f.png" width="928" height="438" class="img_ev3q"></p><p>When a user creates a file or directory they are assigned as the owner of the file and the primary group of that user account is assigned as the group to the file</p><ol start="9"><li>Issue the following command to create a group called <strong>welcome</strong>:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create a group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">groupadd</span><span class="token plain"> welcome</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="10"><li>You&#x27;ll notice that sudo does not work for this user, because we haven&#x27;t given them permissions to run any commands with elevated privileges.</li><li>Log out, and log back in as your normal user.</li><li>Now re-issue the command to create the <strong>welcome</strong> group. This time, sudo should work.</li><li>Issue the commands:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Show recent groups</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> -5 /etc/group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Show recent users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">tail</span><span class="token plain"> -5 /etc/passwd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="ubuntugroups3" src="/OSL645/assets/images/ubuntugroups3-7b4fae68582676267d5422064ff5cf95.png" width="1330" height="349" class="img_ev3q"></p><p>You can see that your account and the 2 <strong>osl645</strong> accounts have been assigned a <strong>GID</strong> (4th field in /etc/passwd) that refers to the group in the /etc/group file. You can also see that the group <strong>welcome</strong> was created and given the next available GID number. Because future user accounts will have the UID and GID that are out of sync, we could change the GID of <strong>Welcome</strong></p><ol start="14"><li>Read the man page for the <strong>groupmod</strong> command.</li><li>Change the <strong>GID</strong> of the <strong>Welcome</strong> group:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Modify the GID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">groupmod</span><span class="token plain"> -g </span><span class="token number" style="color:#36acaa">1500</span><span class="token plain"> welcome</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="16"><li>Read the man page for <strong>usermod</strong> and look for the <strong>-a, --append</strong>, <strong>-g, --gid</strong>, and <strong>-G, --group</strong> options.</li><li>What is the difference between the <strong>-g</strong> and <strong>-G</strong> options?</li><li>Issue two separate <strong>usermod</strong> commands to add both <strong>osl645_2</strong> and <strong>osl645_3</strong> to the newly-created <strong>welcome</strong> group, as a supplemental group:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Add users to the welcome group</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -aG welcome osl645_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -aG welcome osl645_3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="19"><li>Verify that both <strong>osl645_2</strong> and <strong>osl645_3</strong> now belong to the <strong>welcome</strong> group.</li></ol><p>When a file is created it is assigned an owner and a default (primary) group. The Linux system administrator can not only change a file&#x27;s ownership, but also change the default group that a file belongs to. In addition, the sysadmin can also add other users to a supplementary group that they have created via the <strong>usermod</strong> command. This is useful in setting group permissions via the <strong>chmod</strong> command.</p><ol start="20"><li>We can use the <strong>chgrp</strong> command to change the group assigned to the file <strong>information.txt</strong> if you have root permissions</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Change group assigned to a file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chgrp</span><span class="token plain"> welcome ~osl645_2/information.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># List the file details</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> -l ~osl645_2/information.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="21"><li>Open a terminal and list the details for the <strong>information.txt</strong> file</li></ol><p>Groups provide a method for us to assign permissions to multiple user accounts easily.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="practical-example">Practical Example<a href="#practical-example" class="hash-link" aria-label="Direct link to Practical Example" title="Direct link to Practical Example">​</a></h3><p>Management has sent you (the Linux sysadmin) that a &quot;new&quot; employee has been hired and will be on on probation for 3 months. As the Linux system administrator, they want you to perform the following steps:</p><ol><li>Use the <strong>useradd</strong> command to create a user account called: <strong>noobie</strong> to expire in 3 months from this date as part of the security policy of this organization (issue man useradd to determine correct option to set expiry date).</li><li>Set an appropriate password for this user account.</li><li>Add this newly-created user to the newly-created <strong>welcome</strong> group.</li><li>Examine <code>/etc/group</code> to verify that you made the correct operations.</li><li>Use the <strong>usermod</strong> command to set the full name of the user account <strong>noobie</strong> to &quot;<strong>Really Green</strong>&quot;. Examine the result of running that command in the <code>/etc/passwd</code> file. What has changed?</li></ol><p>Unfortunately, you were later informed that this &quot;<strong>noobie</strong>&quot; employee was caught stealing from the company. They want you to perform the following operations:</p><ol start="6"><li>Remove this account, but keep &quot;noobie&#x27;s&quot; home directory for police investigation purposes.</li><li>Verify that you correctly issued the correct commands.</li></ol><p><strong>Answer INVESTIGATION 1 observations / questions in your lab log book.</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-2-controlling-sudo-elevated-privileges">Investigation 2: Controlling Sudo Elevated Privileges<a href="#investigation-2-controlling-sudo-elevated-privileges" class="hash-link" aria-label="Direct link to Investigation 2: Controlling Sudo Elevated Privileges" title="Direct link to Investigation 2: Controlling Sudo Elevated Privileges">​</a></h2><p>When you installed Ubuntu, you didn&#x27;t set a <strong>root</strong> password. This caused the installer to give your first regular user account the ability to use the <strong>sudo</strong> command to run commands with root privileges instead of enabling the <strong>root</strong> account. Which raises some questions.</p><ul><li>How would we allow other users to run commands with <strong>sudo</strong>?</li><li>Can we control access to <strong>sudo</strong> by limiting the commands available?</li></ul><p><strong>sudo</strong> provides a system of giving elevated permissions to specific users and to specific commands. This allows us to distribute administrative workload amongst multiple employees without giving all of them <strong>full</strong> administrative access to the system. For example, we could allow Help Desk staff access to the <strong>passwd</strong> command so they can perform password resets.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-finding-out-why-your-first-user-can-do-anything">Part 1: Finding out why Your First User can do Anything<a href="#part-1-finding-out-why-your-first-user-can-do-anything" class="hash-link" aria-label="Direct link to Part 1: Finding out why Your First User can do Anything" title="Direct link to Part 1: Finding out why Your First User can do Anything">​</a></h3><p>You&#x27;ve already observed that your first user can use <strong>sudo</strong> to execute any command, but what about their account actually makes that possible?</p><ol><li>View (but do not edit) the contents of the <strong>sudo</strong> config file <strong>/etc/sudoers</strong>.</li><li>Read the comments at the top of the file.</li><li>Search the file for your user account name. You won&#x27;t find it.</li><li>Check the contents of <strong>/etc/passwd</strong> and <strong>/etc/group</strong> for entries with your account name.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Check for username</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;username&quot;</span><span class="token plain"> /etc/passwd /etc/group</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="ubuntugroups5" src="/OSL645/assets/images/ubuntugroups5-52df7ba216d2ef64e89957be64d796d5.png" width="1058" height="293" class="img_ev3q"></p><p>You can see that your account is a member of the <strong>sudo group</strong></p><ol start="5"><li>View the file <strong>/etc/sudoers</strong> again.</li><li>Look for the line that allows members of the <strong>sudo</strong> group to execute any command. (Read the comments)</li></ol><p><img loading="lazy" alt="deb1sudo1" src="/OSL645/assets/images/deb1sudo1-7f3d7c53cdbcb3119bcc12a9f78eb0f8.png" width="530" height="58" class="img_ev3q"></p><p>This line allows any user who is part of that group can run <em>any</em> command, as <em>any user</em>. Effectively, they can use sudo to be root.
So why not just give those admins the root password?</p><ol start="7"><li>Check the system journal (log files) for entries that mention <strong>sudo</strong></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Show journal entries for sudo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> journalctl </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sudo&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="ubuntujournal" src="/OSL645/assets/images/ubuntujournal-0b26d644031c5d1d50a4eeeee759fecb.png" width="1896" height="697" class="img_ev3q"></p><p>You can see that all <strong>sudo</strong> activity is recorded in the system log. Including:</p><ul><li>Unsuccessful attempts to use <strong>sudo</strong></li><li>When <strong>sudo</strong> was used</li><li>Who used <strong>sudo</strong></li><li>What did they do with <strong>sudo</strong></li></ul><p>Requiring the use of <strong>sudo</strong> to access elevated permissions means that there is accountability built in to the system.</p><blockquote><p>Not all Linux distributions use the same group name to configure <strong>sudo</strong> access.
RedHat based distributions for example typically use a group called <strong>wheel</strong></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-adding-limited-sudo-capabilities-to-other-users">Part 2: Adding Limited Sudo Capabilities to Other Users<a href="#part-2-adding-limited-sudo-capabilities-to-other-users" class="hash-link" aria-label="Direct link to Part 2: Adding Limited Sudo Capabilities to Other Users" title="Direct link to Part 2: Adding Limited Sudo Capabilities to Other Users">​</a></h3><p>The <strong>sudo</strong> group is very useful for senior admins who should be able to run any command, but what about admins who haven&#x27;t demonstrated the responsibility necessary to wield that power yet? We can use the <strong>sudo</strong> config files to give them privileges to run some commands, but not all. Note: While this could be done in the main <strong>/etc/sudoers</strong> file, the better practice is to create supplemental config files. Supplemental config files are stored in the <strong>/etc/sudoers.d</strong> directory.</p><ol><li>Install the <strong>ssh service daemon</strong>.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ssh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Login as your <strong>osl645_2</strong> account. Try to run the command</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart </span><span class="token function" style="color:#d73a49">ssh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If successful, that command would restart the ssh service on that machine, but that user does not have permission to do that.</p><ol start="3"><li>Try running that command again, this time with <strong>sudo</strong>.</li><li>It still won&#x27;t work, because this user does not have permission to use <strong>sudo</strong> for anything.</li><li>Log out from <strong>osl645_2</strong> and log back in as your normal user.</li><li>Use a text editor to create the file <strong>/etc/sudoers.d/10-osl645_users</strong>. You will require sudo for this to work. Add the following line to it:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">osl645_2 </span><span class="token assign-left variable" style="color:#36acaa">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> /usr/bin/systemctl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>This indicates this user can use sudo to run systemctl commands as if they were any account (root is the important one).</li><li>It is important to notice that commands need to be added with an absolute path to the executable</li></ul><ol start="6"><li>Log out from your normal user and log back in as <strong>osl645_2</strong>.</li><li>Try restarting sshd again. This time it should work.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl status </span><span class="token function" style="color:#d73a49">ssh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="8"><li><p>Change to your <strong>osl645_3</strong> account, and try restarting sshd (with and without sudo).</p><ul><li>That account still can&#x27;t. Sudo entries only affect the users and groups listed.</li></ul></li><li><p>We don&#x27;t want <strong>osl645_3</strong> to manage services, that&#x27;s a job for <strong>osl645_2</strong>, but we do want them to manage user accounts. So log back in as your regular user and create a sudoers file for <strong>osl645_3</strong> called <strong>11-acct_mgmt</strong> (like you did above in step 6) and add entries to it so <strong>osl645_3</strong> can run the useradd, usermod, userdel, groupadd, groupmod, and groupdel commands with <strong>sudo</strong>.</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">osl645_3 </span><span class="token assign-left variable" style="color:#36acaa">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> /usr/sbin/useradd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">osl645_3 </span><span class="token assign-left variable" style="color:#36acaa">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> /usr/sbin/usermod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">osl645_3 </span><span class="token assign-left variable" style="color:#36acaa">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> /usr/sbin/userdel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">osl645_3 </span><span class="token assign-left variable" style="color:#36acaa">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> /usr/sbin/groupadd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">osl645_3 </span><span class="token assign-left variable" style="color:#36acaa">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> /usr/sbin/groupmod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">osl645_3 </span><span class="token assign-left variable" style="color:#36acaa">ALL</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ALL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> /usr/sbin/groupdel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="10"><li>Test the commands as <strong>osl645_3</strong> to make sure it works.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-3-managing-system-services-and-targets-run-levels">Investigation 3: Managing System Services and Targets (Run-levels)<a href="#investigation-3-managing-system-services-and-targets-run-levels" class="hash-link" aria-label="Direct link to Investigation 3: Managing System Services and Targets (Run-levels)" title="Direct link to Investigation 3: Managing System Services and Targets (Run-levels)">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-how-do-we-manage-system-services">Part 1: How do we Manage System Services?<a href="#part-1-how-do-we-manage-system-services" class="hash-link" aria-label="Direct link to Part 1: How do we Manage System Services?" title="Direct link to Part 1: How do we Manage System Services?">​</a></h3><p>At the beginning of this lab we mentioned that running unneeded <strong>packages can be a security risk</strong> due to the unnecessary increase in the complexity of your system. Similarly, it is also unnecessarily hazardous, and even more so, to leave unneeded services running. In this investigation, we will learn how to <strong>control services, and turn off those services that we think are not necessary, to help reduce security risks.</strong></p><p>On most Linux distributions the first process started (PID #1) is called <strong>systemd</strong>. The <strong>systemd</strong> process is responsible for managing, stopping, and starting system services. (As well as other important tasks). The command <code>ps -ef | head -4</code> will show the first few processes currently running.
<img loading="lazy" alt="ubuntuinit1" src="/OSL645/assets/images/ubuntuinit1-b7c403a5027a133bd1804d616d285cfc.png" width="1144" height="148" class="img_ev3q"></p><p>In the output above we see that the <strong>PID 1</strong> process is called <strong>init</strong> not <strong>systemd</strong></p><p><img loading="lazy" alt="ubuntusystemd" src="/OSL645/assets/images/ubuntusystemd-00a68a4fd4d9b9e204122c8932af5f83.png" width="1134" height="62" class="img_ev3q"></p><p>But if we examine the listing for <strong>/sbin/init</strong> we can see that it is a symbolic link to <strong>systemd</strong>.</p><blockquote><p>Note: this yet another example of how there are differences between different Linux Distributions. When researching about Linux on the Internet, make sure your searches are Distribution specific.</p></blockquote><p>In order to control <strong>systemd</strong> we will use the <strong>systemctl</strong> command.</p><blockquote><p>Although there is a command called: <strong>service</strong> that may appear to manage services on your Linux system, it is considered <strong>deprecated</strong> (i.e. &quot;obsolete&quot;). It has been replaced by with the <strong>systemctl</strong> command.</p></blockquote><p><strong>Perform the following steps:</strong></p><ol><li>Remain in your <strong>Ubuntu VM</strong> for this section.</li><li>To verify the status of your <strong>ssh</strong> service, issue the following command:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Show status of a service (sudo not required)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status </span><span class="token function" style="color:#d73a49">ssh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><strong>Note:</strong> The ssh service should show as <strong>inactive (dead)</strong> and <strong>disabled</strong>. This means it is not running, and is not configured to start on boot.</p></li><li><p><strong>Note</strong>: There is a major difference between stopping a service and disabling a service: If a service is stopped but enabled, the service will start upon reboot. Therefore to prevent it being started upon boot-up, the service will need to be disabled as well!</p></li></ul><ol start="3"><li>Issue the following commands to <strong>start</strong> and <strong>enable</strong> the <strong>ssh</strong> service, and <strong>verify</strong> that it is started and enabled.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Start the ssh service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Configure the ssh service to start automatically on boot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ssh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li><p>Issue the command to verify the status of your <strong>ssh</strong> service that you used in step 2.</p><ul><li><strong>Note</strong>: If you performed the commands correctly, the <strong>ssh</strong> service should be running, and will automatically run upon your Linux machine start-up.</li></ul></li></ol><p><img loading="lazy" alt="deb1status" src="/OSL645/assets/images/ubuntustatus-ddf7ce49958d8a5884195bcac89f8542.png" width="1468" height="490" class="img_ev3q"></p><p>It is important for a Linux system administrator to be able to start/stop, enable/disable and check the status of services on their Linux server. Students will be commonly performing these operations in their OSL745 course when configuring and troubleshooting network services.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-how-do-we-manage-targets-formerly-known-as-runlevels">Part 2: How do we Manage Targets (formerly known as runlevels)?<a href="#part-2-how-do-we-manage-targets-formerly-known-as-runlevels" class="hash-link" aria-label="Direct link to Part 2: How do we Manage Targets (formerly known as runlevels)?" title="Direct link to Part 2: How do we Manage Targets (formerly known as runlevels)?">​</a></h3><p>Running Linux servers in graphical mode can make the server vulnerable to penetration (i.e. a potential break-in to the server from unauthorized intruders). The X-windows framework can be vulnerable to attacks when these servers are connected to the Internet. This is why when you install Linux <strong>servers</strong>, they only permit remote terminal connections (via ssh ) or local tty logins. Which are both text-based interfaces only. <strong>Desktop</strong> versions of Linux are typically installed on workstations with one of a number graphical desktop environments.</p><p>A <strong>systemd</strong> <strong>&quot;target&quot;</strong> is essentially a predefined state of the system that the we can &quot;boot&quot; or &quot;switch&quot; the system to. They are similar to an older concept called a &quot;runlevel&quot;. The term &quot;runlevel&quot; is specific to the older SystemV init system.</p><p><strong>List of Common Targets and Equivalent Runlevels</strong>
|Systemd Target|SystemV Runlevel|
|--------------|----------------|
|poweroff.target| 0 |
|rescue.target| 1 |
|multi-user.target| 3 |
|graphical.target| 5 |
|reboot.target| 6 |</p><p>The Linux sysadmin can also change the default target of a Linux system so that we control the target (or state) the system boots to.</p><p>Consider the following commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Display the default target (boot target)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl get-default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change the default target to text based only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl set-default multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change the default target to graphical</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl set-default graphical.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change the current target to support only text based interfaces</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl isolate multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Reboot the system</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl isolate reboot.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Shutdown the system</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl isolate poweroff.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Switch to single user or rescue mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl isolate rescue.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The purpose of <strong>Linux servers</strong> is to run or provide network-based services (i.e. they &quot;<strong>serve</strong>&quot; the users that operating in that Linux/Unix system). It is common that Linux servers are separated, for security purposes, based on the services they are providing. Generally Linux Servers do not have graphical desktops installed so they are <strong>available in Command-Line mode only</strong> (multi-user.target). Running these Linux/Unix servers with a <strong>Graphical Mode will make them more vulnerable to penetration from hackers, etc</strong>. Therefore, it is common that the Linux servers are CLI only, but the Workstations that connect to them within the network are GUI. Therefore, it is important that a Linux/Unix system administrator understand to switch to these different &quot;targets&quot;.</p><p><strong>Perform the following steps:</strong></p><ol><li>Open a terminal (if you do not already have one)</li><li>Issue the following Linux command:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl get-default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>Note</strong>: The output should read <strong>graphical.target</strong></li></ul><ol start="3"><li>You can use the <strong>systemctl isolate</strong> command to change the current target. See a list of targets <a href="https://wiki.debian.org/systemd/CheatSheet" target="_blank" rel="noopener noreferrer">here</a>.</li><li>Change the current target to <strong>multi-user.target</strong>. You will need to login again.</li><li>What did you notice?</li><li>Login as your regular user and reboot your <strong>deb1</strong> VM. It should return to the graphical login screen.</li></ol><p>You should notice at this point that the command <strong>systemctl isolate</strong> did not change the default target the system will boot to.
It just changed or switched the current target.</p><ol start="7"><li>Issue the command to change the default target to <strong>multi-user.target</strong>, then reboot. What do you notice?</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl set-default multi-user.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reboot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="7"><li>Login and change the current run-level to <strong>graphical.target</strong></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl isolate graphical.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="8"><li>Set the default target back to graphical.target before continuing.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl get-default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl set-default graphical.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="9"><li>Issue the following command to run a checking script. <strong>Note</strong> sudo is required:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> ~/bin/lab9-check-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Answer INVESTIGATION 3 observations / questions in your lab log book.</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="linux-practice-questions">Linux Practice Questions<a href="#linux-practice-questions" class="hash-link" aria-label="Direct link to Linux Practice Questions" title="Direct link to Linux Practice Questions">​</a></h2><p>The purpose of this section is to obtain <strong>extra practice</strong> to help with your <strong>practical test</strong>, and your <strong>theory test</strong>.</p><p>Your instructor may take-up these questions during class. It is up to the student to attend classes in order to obtain the answers to the following questions. Your instructor will NOT provide these answers in any other form (eg. e-mail, etc).</p><p><strong>Review Questions:</strong></p><ol><li>Describe all of the fields in <code>/etc/passwd</code></li><li>What is the command to create a user? What option to create a home directory for that user?</li><li>What is the command to change the full name of an already-created user?</li><li>What is the command to delete a user account? What option allows for the user&#x27;s home directory to be removed as well?</li><li>What is the command to create a group? What is the command (or steps) to include a user in a newly-created group?</li><li>What is the purpose of <code>/etc/shadow</code>?</li><li>What is the purpose of <code>/etc/skel</code>?</li><li>What does the term target mean?</li><li>How to set the target of a Linux system to text-based only? How to set to graphical mode?</li><li>What is the command to view the status of running services?</li><li>What is the command to start a service (like httpd, or sshd)?</li><li>What is the command to stop a service (like httpd, or sshd)?</li><li>What is the difference between <strong>starting</strong> a service and <strong>enabling</strong> a service?</li><li>Can a service be stopped and started by issuing just one command?</li></ol><hr><p>Authors: Murray Saul, Brian Gray &amp; Jason Carman</p><p>License: LGPL version 3 Link: <a href="https://www.gnu.org/licenses/lgpl.html" target="_blank" rel="noopener noreferrer">https://www.gnu.org/licenses/lgpl.html</a></p><hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/OSL640dev/tree/main/docs/Labs/lab9.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/OSL645/Labs/lab8"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 8 - Sed and Awk Utilities</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/OSL645/Labs/lab10"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 10 - Advanced Shell Scripting</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#main-objectives" class="table-of-contents__link toc-highlight">Main Objectives</a></li><li><a href="#lab-reference-material" class="table-of-contents__link toc-highlight">Lab Reference Material</a></li><li><a href="#commands" class="table-of-contents__link toc-highlight">Commands:</a></li><li><a href="#key-concepts" class="table-of-contents__link toc-highlight">KEY CONCEPTS</a></li><li><a href="#investigation-1-usergroup-management" class="table-of-contents__link toc-highlight">Investigation 1: User/Group Management</a><ul><li><a href="#part-1-studying-the-etcpasswd-file" class="table-of-contents__link toc-highlight">Part 1: Studying the /etc/passwd file</a></li><li><a href="#part-2-adding-removing-and-modifying-users" class="table-of-contents__link toc-highlight">Part 2: Adding, Removing, and Modifying Users</a></li><li><a href="#part-3-managing-groups" class="table-of-contents__link toc-highlight">Part 3: Managing Groups</a></li><li><a href="#practical-example" class="table-of-contents__link toc-highlight">Practical Example</a></li></ul></li><li><a href="#investigation-2-controlling-sudo-elevated-privileges" class="table-of-contents__link toc-highlight">Investigation 2: Controlling Sudo Elevated Privileges</a><ul><li><a href="#part-1-finding-out-why-your-first-user-can-do-anything" class="table-of-contents__link toc-highlight">Part 1: Finding out why Your First User can do Anything</a></li><li><a href="#part-2-adding-limited-sudo-capabilities-to-other-users" class="table-of-contents__link toc-highlight">Part 2: Adding Limited Sudo Capabilities to Other Users</a></li></ul></li><li><a href="#investigation-3-managing-system-services-and-targets-run-levels" class="table-of-contents__link toc-highlight">Investigation 3: Managing System Services and Targets (Run-levels)</a><ul><li><a href="#part-1-how-do-we-manage-system-services" class="table-of-contents__link toc-highlight">Part 1: How do we Manage System Services?</a></li><li><a href="#part-2-how-do-we-manage-targets-formerly-known-as-runlevels" class="table-of-contents__link toc-highlight">Part 2: How do we Manage Targets (formerly known as runlevels)?</a></li></ul></li><li><a href="#linux-practice-questions" class="table-of-contents__link toc-highlight">Linux Practice Questions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">OSL645 - Introduction to Open Source Systems</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/OSL645/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Jason Carman.</div></div></div></footer></div>
<script src="/OSL645/assets/js/runtime~main.fd965d1f.js"></script>
<script src="/OSL645/assets/js/main.bac71425.js"></script>
</body>
</html>